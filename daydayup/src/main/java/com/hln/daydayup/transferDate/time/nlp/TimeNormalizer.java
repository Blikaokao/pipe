package com.hln.daydayup.transferDate.time.nlp;

import java.io.*;
import java.net.URL;
import java.net.URLDecoder;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Calendar;
import java.util.Date;
import java.util.List;
import java.util.regex.Matcher;
import java.util.regex.Pattern;
import java.util.zip.GZIPInputStream;
import java.util.zip.GZIPOutputStream;

/**
 * <p>
 * �°�ʱ����ʽʶ�����Ҫ������
 * <p>
 *
 * @author <a href="mailto:kexm@corp.21cn.com">kexm</a>
 * @since 2016��5��4��
 */
public class TimeNormalizer implements Serializable {

    private static final long serialVersionUID = 463541045644656392L;
//    private static final Logger LOGGER = LoggerFactory.getLogger(TimeNormalizer.class);

    private String timeBase;
    private String oldTimeBase;
    private static Pattern patterns = null;
    private String target;
    private TimeUnit[] timeToken = new TimeUnit[0];

    private boolean isPreferFuture = true;

    public TimeNormalizer() {
        if (patterns == null) {
            try {
                InputStream in = getClass().getResourceAsStream("/TimeExp.m");
                ObjectInputStream objectInputStream = new ObjectInputStream(
                        new BufferedInputStream(new GZIPInputStream(in)));
                patterns = readModel(objectInputStream);
            } catch (Exception e) {
                e.printStackTrace();
                System.err.print("Read model error!");
            }
        }
    }

    /**
     * ����ΪTimeExp.m�ļ�·��
     *
     * @param path
     */
    public TimeNormalizer(String path) {
        if (patterns == null) {
            try {
                patterns = readModel(path);
            } catch (Exception e) {
                e.printStackTrace();
                System.err.print("Read model error!");
            }
        }
    }

    /**
     * ����ΪTimeExp.m�ļ�·��
     *
     * @param path
     */
    public TimeNormalizer(String path, boolean isPreferFuture) {
        this.isPreferFuture = isPreferFuture;
        if (patterns == null) {
            try {
                patterns = readModel(path);
//                LOGGER.debug("loaded pattern:{}", patterns.pattern());
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                System.err.print("Read model error!");
            }
        }
    }

    /**
     * TimeNormalizer�Ĺ��췽���������ṩ�Ĵ������ַ�����timeBase����ʱ����ʽ��ȡ
     * �ڹ��췽��������ɶԴ������ַ����ı��ʽ��ȡ����
     *
     * @param target   �������ַ���
     * @param timeBase ������timeBase
     * @return ����ֵ
     */
    public TimeUnit[] parse(String target, String timeBase) {
        this.target = target;
        this.timeBase = timeBase;
        this.oldTimeBase = timeBase;
        // �ַ���Ԥ����
        preHandling();
        timeToken = TimeEx(this.target, timeBase);
        return timeToken;
    }

    /**
     * ͬ�ϵ�TimeNormalizer�Ĺ��췽����timeBaseȡĬ�ϵ�ϵͳ��ǰʱ��
     *
     * @param target �������ַ���
     * @return ʱ�䵥Ԫ����
     */
    public TimeUnit[] parse(String target) {
        this.target = target;
        this.timeBase = new SimpleDateFormat("yyyy-MM-dd-HH-mm-ss").format(Calendar.getInstance().getTime());// TODO
        // Calendar.getInstance().getTime()����new
        // Date��
        this.oldTimeBase = timeBase;
        preHandling();// �ַ���Ԥ����
        timeToken = TimeEx(this.target, timeBase);
        return timeToken;
    }

    //

    /**
     * timeBase��get����
     *
     * @return ����ֵ
     */
    public String getTimeBase() {
        return timeBase;
    }

    /**
     * oldTimeBase��get����
     *
     * @return ����ֵ
     */
    public String getOldTimeBase() {
        return oldTimeBase;
    }

    public boolean isPreferFuture() {
        return isPreferFuture;
    }

    public void setPreferFuture(boolean isPreferFuture) {
        this.isPreferFuture = isPreferFuture;
    }

    /**
     * timeBase��set����
     *
     * @param s timeBase
     */
    public void setTimeBase(String s) {
        timeBase = s;
    }

    /**
     * ����timeBaseΪoldTimeBase
     */
    public void resetTimeBase() {
        timeBase = oldTimeBase;
    }

    /**
     * ʱ����������TimeUnit�����ʽ���֣��˷���Ϊ���������get����
     *
     * @return ����ֵ
     */
    public TimeUnit[] getTimeUnit() {
        return timeToken;
    }

    /**
     * ��ƥ���ַ���������հ׷������������Լ���д����ת����Ԥ����
     */
    private void preHandling() {
        target = stringPreHandlingModule.delKeyword(target, "\\s+"); // ����հ׷�
        target = stringPreHandlingModule.delKeyword(target, "[��]+"); // ������������
        target = stringPreHandlingModule.numberTranslator(target);// ��д����ת��
        // TODO �����Сд������
    }

    /**
     * �л�׼ʱ�������ʱ����ʽʶ��
     * <p>
     * ����ʱ����ʽʶ����������� ͨ���Ѿ�������������ʽ���ַ�������ʶ�𣬲�����Ԥ�ȶ���Ļ�׼ʱ����й淶��
     * �����б�ʶ�𲢽��й淶����ʱ����ʽ���з��أ� ʱ����ʽͨ��TimeUnit����ж���
     *
     * @param String �����ı��ַ���
     * @param String �����׼ʱ��
     * @return TimeUnit[] ʱ����ʽ��������
     */
    private TimeUnit[] TimeEx(String tar, String timebase) {
        Matcher match;
        int startline = -1, endline = -1;

        String[] temp = new String[99];
        int rpointer = 0;// ����������¼��ǰʶ����һ���ַ�����
        TimeUnit[] Time_Result = null;

        match = patterns.matcher(tar);
        boolean startmark = true;
        while (match.find()) {
            startline = match.start();
            if (endline == startline) // ������һ��ʶ�𵽵�ʱ���ֶκ���һ���������� @author kexm
            {
                rpointer--;
                temp[rpointer] = temp[rpointer] + match.group();// �����һ��ʶ�𵽵�ʱ���ֶμӵ���һ��ʱ���ֶ�ȥ
            } else {
                if (!startmark) {
                    rpointer--;
                    rpointer++;
                }
                startmark = false;
                temp[rpointer] = match.group();// ��¼��ǰʶ�𵽵�ʱ���ֶΣ�����startmark���عرա��������ò��û�ã�
            }
            endline = match.end();
            rpointer++;
        }
        if (rpointer > 0) {
            rpointer--;
            rpointer++;
        }
        Time_Result = new TimeUnit[rpointer];
        /**ʱ�������ģ� ǰһ��ʶ�������ʱ�������һ��ʱ��������ģ����ڴ�������3�㵽5�������Ķ��ʱ���ʶ�𣬵ڶ���5��Ӧʶ���������ġ�*/
        TimePoint contextTp = new TimePoint();
        for (int j = 0; j < rpointer; j++) {
            Time_Result[j] = new TimeUnit(temp[j], this, contextTp);
            contextTp = Time_Result[j]._tp;
        }
        /**�����޷�ʶ����ֶ�*/
        Time_Result = filterTimeUnit(Time_Result);
        return Time_Result;
    }

    /**
     * ����timeUnit�����õ�ʶ��ʡ�����ʶ���ʶ�����ʱ����1970.01.01 00:00:00(fastTime=-28800000)
     *
     * @param timeUnit
     * @return
     */
    public static TimeUnit[] filterTimeUnit(TimeUnit[] timeUnit) {
        if (timeUnit == null || timeUnit.length < 1) {
            return timeUnit;
        }
        List<TimeUnit> list = new ArrayList<>();
        for (TimeUnit t : timeUnit) {
            if (t.getTime().getTime() != -28800000) {
                list.add(t);
            }
        }
        TimeUnit[] newT = new TimeUnit[list.size()];
        newT = list.toArray(newT);
        return newT;
    }

    private Pattern readModel(String file) throws Exception {
        ObjectInputStream in;
        if (file.startsWith("jar:file") || file.startsWith("file:")) {
            in = new ObjectInputStream(new BufferedInputStream(new GZIPInputStream(new URL(file).openStream())));
        } else {
            in = new ObjectInputStream(
                    new BufferedInputStream(new GZIPInputStream(new FileInputStream(file))));
        }
        return readModel(in);
    }

    private Pattern readModel(ObjectInputStream in) throws Exception {
        Pattern p = (Pattern) in.readObject();
//        LOGGER.debug("model pattern:{}", p.pattern());
        return Pattern.compile(p.pattern());
    }

    public static void writeModel(Object p, String path) throws Exception {
        ObjectOutputStream out = new ObjectOutputStream(
                new BufferedOutputStream(new GZIPOutputStream(new FileOutputStream(path))));
        out.writeObject(p);
        out.close();
    }
    
public static Date[] getTextTime(String text) throws Exception{
 

    	URL url=TimeNormalizer.class.getResource("");
        String path = URLDecoder.decode(url.getPath(), "UTF-8");
        String classPath = path.substring(0, path.indexOf("/com/time/nlp"));
//        LOGGER.debug(classPath + "/TimeExp1.zip");
        TimeNormalizer normalizer = new TimeNormalizer(classPath+"/TimeExp.m");

        normalizer.parse(text);// ��ȡʱ��
       // normalizer.parse("��������ʮ��");

        TimeUnit[] unit = normalizer.getTimeUnit();
        Date[] dates = new Date[unit.length];
        
        for(int i = 0;i<unit.length;i++) {
        	dates[i] = new Date();
        	dates[i] = unit[i].getTime();
            System.out.println(dates[i]+"123111");
        }

        return dates;
        
        
        //return unit;
//        LOGGER.debug(DateUtil.formatDateDefault(unit[0].getTime()));
//        LOGGER.debug(DateUtil.formatDateDefault(unit[1].getTime()));
        /**дTimeExp*/
//		Pattern p = Pattern.compile("((ǰ|��|��|��|��)(��|��)?(��|��)(��|��|��)?)|(\\d+��?[��������][��֮]?[ǰ��])|(\\d+��?��?(Сʱ|��ͷ|h|H))|(���?(Сʱ|��ͷ))|(\\d+(����|min))|([13]����)|((��|��|��|��)+(��|����)([һ����������������]|[1-7])?)|((��|����)([һ����������������]|[1-7]))|((��|��)?([0-2]?[0-9](��|ʱ)��)(am|AM|pm|PM)?)|((��|��)?(\\d+[:��]\\d+([:��]\\d+)*)\\s*(am|AM|pm|PM)?)|((��|��)?([0-2]?[0-9](��|ʱ)[13һ��]��)(am|AM|pm|PM)?)|((��|��)?(\\d+[ʱ��](\\d+)?��?(\\d+��?)?)\\s*(am|AM|pm|PM)?)|(��+(ǰ|��)��)|(([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)��)|([0-9]?[0-9]?[0-9]{2}\\.((10)|(11)|(12)|([1-9]))\\.((?<!\\\\d))([0-3][0-9]|[1-9]))|(����)|(��ʱ)|(�����)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(��Щʱ��)|(����)|(����)|(��ǰ)|(��ȥ)|(ʱ��)|(ʱ��)|(��ʱ)|(����)|(([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)ҹ)|(��ǰ)|(��(��|��|����|�ü�|��|���|��|ǰ|��|��|����))|((\\d+)��)|(����([��һ�����������߰˾�ʮ��ǧ��]+|\\d+))|(\\d+[:��]\\d+(��|))|((\\d+):(\\d+))|(\\d+/\\d+/\\d+)|(δ��)|((����������ϣ������ս��)?δ��)|(���)|(����)|(��(��|��|����|�ü�|��|���|��|ǰ|��|��|����))|(��ǰ)|(������)|(Сʱ)|(([0-3][0-9]|[1-9])(��|��))|(����)|(([0-3][0-9]|[1-9])[�պ�])|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)��)|([һ�����������߰˾�ʮ��ǧ�򼸶�]+[����������][��ǰ����]*)|(ÿ[��������Сʱ������]+)|((\\d+��)+(\\d+��)?)|([һ�����������߰˾�ʮ]+��?[����])|([��?|\\d*]����ĩ?)|((\\d+)ʱ)|(����)|(([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)��)|(����)|([������]+[һ������������])|(����([��һ�����������߰˾�ʮ��ǧ��]+|\\d+))|(([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)��)|([�������º�����ȥǰ����][һ�����������߰˾�ʮ]?[��������])|(��|�糿|����|����|����|���|����|����|���|ҹ��|ҹ|�賿|��ҹ)|(�ع�ǰ��)|((\\d+��)+(\\d+��)?(\\d+��)?����?)|((\\d+)���)|(����(\\d+))|(��(\\d+)��)|((\\d+)��)|((\\d+)��(\\d+)��)|([ȥ����]?[����](��|ĩ))|(([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)����)|(����(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(���)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)����)|(���)|([�¸���]+����)|(����(\\d+)��(\\d+)��)|((\\d+)��(\\d+)��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��(\\d+)ʱ)|(������Щʱ��)|(��������)|(��ȥ(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(������)|(���(��|��|����|�ü�|��|���|��|ǰ|��|��|����))|(����)|((\\d+)����(��|��|����|�ü�|��|���|��|ǰ|��|��|����))|(��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)(\\d+)��)|(���ʱ��)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)��Сʱ)|(��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(�賿)|((\\d+)��(\\d+)��(\\d+)��)|((\\d+)����)|(������(��|��|����|�ü�|��|���|��|ǰ|��|��|����))|(��[һ�����������߰˾�ʮ\\d+]+��)|(����ʱ��)|(��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)��)|(�糿)|(һ��ʱ��)|([����]��[һ������������])|(�賿(\\d+)��)|(ȥ��(\\d+)��(\\d+)��)|(���)|(���)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)Сʱ)|(����)|((\\d+)����(\\d+)ʱ)|(([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(ÿ��(\\d+)��(\\d+)��)|(([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)��)|((\\d+)��)|(ũ��)|(����Сʱ)|(����([��һ�����������߰˾�ʮ��ǧ��]+|\\d+))|(����)|(�峿)|((\\d+)����)|(����)|(������)|(ʥ��)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(����)|(����)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)����)|(\\d+(��|��|��|��|��)(��|ǰ|))|((���ո���|�����|ǰ����|ǰһ|������ר��|����ʱ��|������|��������������)+ʱ��)|((\\d+)[������])|(����)|(����)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(����(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��(\\d+)ʱ)|(([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)(\\d+))|(ʥ����)|(ѧ��)|(\\d+��?����)|(��ȥ(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(������)|(ҹ��)|((\\d+)���賿)|(([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)�µ�)|(����)|((\\d+)��)|(((10)|(11)|(12)|([1-9]))��)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(����(\\d+)�·�)|(��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)(\\d+)ʱ)|(��[������ҹ])|((\\d+)��(\\d+)��(\\d+)��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|((һ|��|��|��|��|��|��|��|��|��|ʮ|��|ǧ|��|��|��|��|\\d+)+��?(��|��|��|��|��)(��|ǰ|��|))|((ʤ����)����)|(�ഺ��)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)��(��|��|����|�ü�|��|���|��|ǰ|��|��|����))|([0-9]{4}��)|(��ĩ)|(([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)Сʱ)|(([(Сѧ)|����?|����?|��ѧ?|��][һ�����������߰˾�ʮ]?(\\d+)?)?[����]��?ѧ��)|(([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)ʱ��)|(���)|(����)|(��ʱ��)|(ũ������)|([�����ﶬ](��|��))|((\\d+)��)|(Ԫ����)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|((\\d+)��(\\d+)��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)(\\d+)ʱ(\\d+)��)|(����)|(��([��һ�����������߰˾�ʮ��ǧ��]+|\\d+))|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)��(\\d+)ʱ(\\d+)��)|(ͬ��)|((\\d+)��(\\d+)�µ�)|((\\d+)����)|((\\d+)����)|(����)|(����)|(���)|(([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)���)|(�������)|(����)|(����)|(����ʱ������([��һ�����������߰˾�ʮ��ǧ��]+|\\d+))|(([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(��Сʱ)|(ÿ��)|(([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)����)|((��Ҫ|���)?ʱ��)|(([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)�ڼ�)|(����)|(��(��|��|����|�ü�|��|���|��|ǰ|��|��|����))|(���)|(([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)��ʱ��)|(����)|([12][09][0-9]{2}(���?((ǰ|��|��|��|��)(��|��)?(��|��)(��|��|��)?)|(\d+��?[��������][��֮]?[ǰ��])|(\d+��?��?(Сʱ|��ͷ|h|H))|(���?(Сʱ|��ͷ))|(\d+(����|min))|([13]����)|((��|��|��|��)+(��|����)([һ����������������]|[1-7])?)|((��|����)([һ����������������]|[1-7]))|((��|��)?([0-2]?[0-9](��|ʱ)��)(am|AM|pm|PM)?)|((��|��)?(\d+[:��]\d+([:��]\d+)*)\s*(am|AM|pm|PM)?)|((��|��)?([0-2]?[0-9](��|ʱ)[13һ��]��)(am|AM|pm|PM)?)|((��|��)?(\d+[ʱ��](\d+)?��?(\d+��?)?)\s*(am|AM|pm|PM)?)|(��+(ǰ|��)��)|(([��һ�����������߰˾�ʮ��ǧ��]+|\d+)��)|([0-9]?[0-9]?[0-9]{2}\.((10)|(11)|(12)|([1-9]))\.((?<!\\d))([0-3][0-9]|[1-9]))|(����)|(��ʱ)|(�����)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(��Щʱ��)|(����)|(����)|(��ǰ)|(��ȥ)|(ʱ��)|(ʱ��)|(��ʱ)|(����)|(([��һ�����������߰˾�ʮ��ǧ��]+|\d+)ҹ)|(��ǰ)|(��(��|��|����|�ü�|��|���|��|ǰ|��|��|����))|((\d+)��)|(����([��һ�����������߰˾�ʮ��ǧ��]+|\d+))|(\d+[:��]\d+(��|))|((\d+):(\d+))|(\d+/\d+/\d+)|(δ��)|((����������ϣ������ս��)?δ��)|(���)|(����)|(��(��|��|����|�ü�|��|���|��|ǰ|��|��|����))|(��ǰ)|(������)|(Сʱ)|(([0-3][0-9]|[1-9])(��|��))|(����)|(\d+)��|(([0-3][0-9]|[1-9])[�պ�])|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)([��һ�����������߰˾�ʮ��ǧ��]+|\d+)��)|([һ�����������߰˾�ʮ��ǧ�򼸶�]+[����������][��ǰ����]*)|(ÿ[��������Сʱ������]+)|((\d+��)+(\d+��)?)|([һ�����������߰˾�ʮ]+��?[����])|([��?|\d*]����ĩ?)|((\d+)ʱ)|(����)|(([��һ�����������߰˾�ʮ��ǧ��]+|\d+)��)|(����)|([������]+[һ������������])|(����([��һ�����������߰˾�ʮ��ǧ��]+|\d+))|(([��һ�����������߰˾�ʮ��ǧ��]+|\d+)��)|([�������º�����ȥǰ����][һ�����������߰˾�ʮ]?[��������])|(��|�糿|����|����|����|���|����|����|���|ҹ��|ҹ|�賿|��ҹ)|(�ع�ǰ��)|((\d+��)+(\d+��)?(\d+��)?����?)|((\d+)���)|(����(\d+))|(��(\d+)��)|((\d+)��)|((\d+)��(\d+)��)|([ȥ����]?[����](��|ĩ))|(([��һ�����������߰˾�ʮ��ǧ��]+|\d+)����)|(����(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(���)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)����)|(���)|([�¸���]+����)|(\d+)��(\d+)��|(\d+)��(\d+)|(����(\d+)��(\d+)��)|((\d+)��(\d+)��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��(\d+)ʱ)|(������Щʱ��)|(��������)|(��ȥ(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(������)|(���(��|��|����|�ü�|��|���|��|ǰ|��|��|����))|(����)|((\d+)����(��|��|����|�ü�|��|���|��|ǰ|��|��|����))|(��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)(\d+)��)|(���ʱ��)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)��Сʱ)|(��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(�賿)|((\d+)��(\d+)��(\d+)��)|((\d+)����)|(������(��|��|����|�ü�|��|���|��|ǰ|��|��|����))|(��[һ�����������߰˾�ʮ\d+]+��)|(����ʱ��)|(��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)([��һ�����������߰˾�ʮ��ǧ��]+|\d+)��)|(�糿)|(һ��ʱ��)|([����]��[һ������������])|(�賿(\d+)��)|(ȥ��(\d+)��(\d+)��)|(���)|(���)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)Сʱ)|(����)|((\d+)����(\d+)ʱ)|(([��һ�����������߰˾�ʮ��ǧ��]+|\d+)(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(ÿ��(\d+)��(\d+)��)|(([��һ�����������߰˾�ʮ��ǧ��]+|\d+)��)|((\d+)��)|(ũ��)|(����Сʱ)|(����([��һ�����������߰˾�ʮ��ǧ��]+|\d+))|(����)|(�峿)|((\d+)����)|(����)|(������)|(ʥ��)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(����)|(����)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)����)|(\d+(��|��|��|��|��)(��|ǰ|))|((���ո���|�����|ǰ����|ǰһ|������ר��|����ʱ��|������|��������������)+ʱ��)|((\d+)[������])|(����)|(����)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(����(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��(\d+)ʱ)|(([��һ�����������߰˾�ʮ��ǧ��]+|\d+)(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)(\d+))|(ʥ����)|(ѧ��)|(\d+��?����)|(��ȥ(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(������)|(ҹ��)|((\d+)���賿)|(([��һ�����������߰˾�ʮ��ǧ��]+|\d+)�µ�)|(����)|((\d+)��)|(((10)|(11)|(12)|([1-9]))��)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(����(\d+)�·�)|(��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)(\d+)ʱ)|(��[������ҹ])|((\d+)��(\d+)��(\d+)��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|((һ|��|��|��|��|��|��|��|��|��|ʮ|��|ǧ|��|��|��|��|\d+)+��?(��|��|��|��|��)(��|ǰ|��|))|((ʤ����)����)|(�ഺ��)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)([��һ�����������߰˾�ʮ��ǧ��]+|\d+)��(��|��|����|�ü�|��|���|��|ǰ|��|��|����))|([0-9]{4}��)|(��ĩ)|(([��һ�����������߰˾�ʮ��ǧ��]+|\d+)��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)Сʱ)|(([(Сѧ)|����?|����?|��ѧ?|��][һ�����������߰˾�ʮ]?(\d+)?)?[����]��?ѧ��)|(([��һ�����������߰˾�ʮ��ǧ��]+|\d+)ʱ��)|(���)|(����)|(��ʱ��)|(ũ������)|([�����ﶬ](��|��))|((\d+)��)|(Ԫ����)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|((\d+)��(\d+)��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)(\d+)ʱ(\d+)��)|(����)|(��([��һ�����������߰˾�ʮ��ǧ��]+|\d+))|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)��(\d+)ʱ(\d+)��)|(ͬ��)|((\d+)��(\d+)�µ�)|((\d+)����)|((\d+)����)|(����)|(����)|(���)|(([��һ�����������߰˾�ʮ��ǧ��]+|\d+)���)|(�������)|(����)|(����)|(����ʱ������([��һ�����������߰˾�ʮ��ǧ��]+|\d+))|(([��һ�����������߰˾�ʮ��ǧ��]+|\d+)(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(��Сʱ)|(ÿ��)|(([��һ�����������߰˾�ʮ��ǧ��]+|\d+)����)|((��Ҫ|���)?ʱ��)|(([��һ�����������߰˾�ʮ��ǧ��]+|\d+)�ڼ�)|(����)|(��(��|��|����|�ü�|��|���|��|ǰ|��|��|����))|(���)|(([��һ�����������߰˾�ʮ��ǧ��]+|\d+)��ʱ��)|(����)|([12][09][0-9]{2}(���?))|(([��һ�����������߰˾�ʮ��ǧ��]+|\d+)��)|(�����賿)|(��ȥ(\d+)��)|(Ԫ��)|((\d+)��(\d+)���賿)|([ǰȥ��������]+��)|((\d+)��(\d+))|(����)|((\d+)���賿(\d+)ʱ��)|((\d+)��(\d+)��)|((\d+)���)|(ȥ���)|(���һ[���])|(��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)(��|��|����|�ü�|��|���|��|ǰ|��|��|����)����)|(ʥ����?)|(��?��?(����|��)(һ|��|��|��|��|��|��|��))|((\d+)(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(����(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(ÿ���(\d+)��(\d+)��)|((\d+)����(��|��|����|�ü�|��|���|��|ǰ|��|��|����))|(����([��һ�����������߰˾�ʮ��ǧ��]+|\d+)��)|(��ҹ)|(�����)|([������]+��)|(��(һ|��|��|��|��|��|��|��|��|ʮ|��|ǧ|��|��|��|\d+)+��?(��|��|��|��|��))|(����)|(����)|(�����峿)|(��Ѯ)|(����([��һ�����������߰˾�ʮ��ǧ��]+|\d+)��)|(([��һ�����������߰˾�ʮ��ǧ��]+|\d+)ս�ڼ�)|(����)|(������(��|��|����|�ü�|��|���|��|ǰ|��|��|����))|(����ʱ)|(��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)Сʱ)|((��������|����������|�������������Σ������������Լ���ʢ�е�|���ٳа���Ӱ��Ȩ��|�ָ���������|����������������ʩ|���ܱ�����Ұ������Ѫ����ޡ����ʵ�|ͯ��|����ͯ��)+ʱ��)|(Ԫ��)|(([��һ�����������߰˾�ʮ��ǧ��]+|\d+)�����)|(����)|([����]��)|((\d+)���(\d+)��)|(ÿ��)|(([��һ�����������߰˾�ʮ��ǧ��]+|\d+)�·�)|(����(\d+)��(\d+)��)|(����([��һ�����������߰˾�ʮ��ǧ��]+|\d+)��)|((\d+)�µ�)|(δ��(\d+)��)|(��([��һ�����������߰˾�ʮ��ǧ��]+|\d+)��)|(\d?����)|(([��һ�����������߰˾�ʮ��ǧ��]+|\d+)������)|((\d+)��([��һ�����������߰˾�ʮ��ǧ��]+|\d+)��)|([������]��)|(��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)(\d+)��)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(([��һ�����������߰˾�ʮ��ǧ��]+|\d+)��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(ͬ([��һ�����������߰˾�ʮ��ǧ��]+|\d+)��)|((\d+)���賿)|(ҹ��)|(����(��|��|����|�ü�|��|���|��|ǰ|��|��|����)Сʱ)|(����)|(����ʱ��)|(Ŀ(��|��|����|�ü�|��|���|��|ǰ|��|��|����))|(([��һ�����������߰˾�ʮ��ǧ��]+|\d+)��)|((\d+)��(\d+)��(\d+)��)|(((10)|(11)|(12)|([1-9]))�·�?)|([12][0-9]����)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)([��һ�����������߰˾�ʮ��ǧ��]+|\d+)��)|(������)|(�Ժ�)|((\d+)��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(δ��([��һ�����������߰˾�ʮ��ǧ��]+|\d+)��)|([0-9]+[����������][��ǰ����]*)|(([��һ�����������߰˾�ʮ��ǧ��]+|\d+)��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)([��һ�����������߰˾�ʮ��ǧ��]+|\d+)��)|(�ܾ�)|((\d+)(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(ȥ��(\d+)��(\d+)��)|(������)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)��(\d+)ʱ)|(�Ŵ�)|(����)|(\d+��?(Сʱ|����))|((\d+)���)|(����)|(([��һ�����������߰˾�ʮ��ǧ��]+|\d+)��Сʱ)|([һ�����������߰˾�ʮ]+����)|(����([��һ�����������߰˾�ʮ��ǧ��]+|\d+)(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(ʱ��)|((\d+��)+(\d+��)?(\d+��)?(\d+��)?)|((\d+)��([��һ�����������߰˾�ʮ��ǧ��]+|\d+)ʱ)|((\d+)����)|(([��һ�����������߰˾�ʮ��ǧ��]+|\d+)��)|(([��һ�����������߰˾�ʮ��ǧ��]+|\d+)��)|(ȥ��(\d+)��)|(��ȥ([��һ�����������߰˾�ʮ��ǧ��]+|\d+)��)|((\d+)������)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(ִ���ڼ�)|([��ǰ����������ﶬ]+��)|(ȥ��(\d+)�·�)|(��(��|��|����|�ü�|��|���|��|ǰ|��|��|����))|((\d+)��)|(������)|(([��һ�����������߰˾�ʮ��ǧ��]+|\d+)���)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(����)|(��������)|([ӡ��|����|����]?����ʱ��)|(����)|(����(\d+)��)|(��([��һ�����������߰˾�ʮ��ǧ��]+|\d+)��)|((\d+)��(\d+)��)|([������]��)|((\d+)��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��(\d+)ʱ)|(��ʱ)|(��սʱ��)|(([��һ�����������߰˾�ʮ��ǧ��]+|\d+)��)|(�������)|(ȥ��)|(�������)|(����)|(����([��һ�����������߰˾�ʮ��ǧ��]+|\d+)��Щʱ��)|((\d+)([��һ�����������߰˾�ʮ��ǧ��]+|\d+)��)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)������)|((\d+)��Сʱ)|(([��һ�����������߰˾�ʮ��ǧ��]+|\d+)����)|(����)|(����)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)([��һ�����������߰˾�ʮ��ǧ��]+|\d+)����)|((\d+)��(��|��|����|�ü�|��|���|��|ǰ|��|��|����))|(Ŀǰ)|(ȥ��([��һ�����������߰˾�ʮ��ǧ��]+|\d+)��)|((\d+)ʱ(\d+)��)|(ÿ��)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)��ʱ��)|((\d+)����)|(��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)(\d+)��(��|��|����|�ü�|��|���|��|ǰ|��|��|����))|(��Ѯ)|((\d+)�·�)|(����)|(��(��|��|����|�ü�|��|���|��|ǰ|��|��|����))|((\d+)��)|(�µ�)|(�����)|((\d+)��(\d+)����)|(\d+����)|(��([��һ�����������߰˾�ʮ��ǧ��]+|\d+)��(��|��|����|�ü�|��|���|��|ǰ|��|��|����))|(����)|(����)|(ĩ��)|(������ҹ)|(����(\d+)��)|((\d+)��(\d+)��)|((\d+)��ҹ)|((��Щ|ĳ��|���|��������Щ|ǰЩ)+ʱ��)|(ͬ��)|((����|�Ǹ�|������|���ճ�ͻ��)ʱ��)|(ÿ����)|(һ��)|((\d+)��?[����])|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)����)|([��ţ������������Ｆ����]��)|(����)|(��Щʱ��)|(����)|(ÿ��)|(���)|(��(��)?��)|(���)|((\d+)��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)������)|(����(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(ͬ[һ�����������߰˾�ʮ][��|��|��])|(T\d+:\d+:\d+)|(\d+/\d+/\d+:\d+:\d+.\d+)|(\?\?\?\?-\?\?-\?\?T\d+:\d+:\d+)|(\d+-\d+-\d+T\d+:\d+:\d+)|(\d+/\d+/\d+ \d+:\d+:\d+.\d+)|(\d+-\d+-\d+|[0-9]{8})|(((\d+)��)?((10)|(11)|(12)|([1-9]))��(\d+))|((\d[\.\-])?((10)|(11)|(12)|([1-9]))[\.\-](\d+))))|(([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)��)|(�����賿)|(��ȥ(\\d+)��)|(Ԫ��)|((\\d+)��(\\d+)���賿)|([ǰȥ��������]+��)|((\\d+)��(\\d+))|(����)|((\\d+)���賿(\\d+)ʱ��)|((\\d+)��(\\d+)��)|((\\d+)���)|(ȥ���)|(���һ[���])|(��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)(��|��|����|�ü�|��|���|��|ǰ|��|��|����)����)|(ʥ����?)|(��?��?(����|��)(һ|��|��|��|��|��|��|��))|((\\d+)(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(����(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(ÿ���(\\d+)��(\\d+)��)|((\\d+)����(��|��|����|�ü�|��|���|��|ǰ|��|��|����))|(����([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)��)|(��ҹ)|(�����)|([������]+��)|(��(һ|��|��|��|��|��|��|��|��|ʮ|��|ǧ|��|��|��|\\d+)+��?(��|��|��|��|��))|(����)|(����)|(�����峿)|(��Ѯ)|(����([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)��)|(([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)ս�ڼ�)|(����)|(������(��|��|����|�ü�|��|���|��|ǰ|��|��|����))|(����ʱ)|(��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)Сʱ)|((��������|����������|�������������Σ������������Լ���ʢ�е�|���ٳа���Ӱ��Ȩ��|�ָ���������|����������������ʩ|���ܱ�����Ұ������Ѫ����ޡ����ʵ�|ͯ��|����ͯ��)+ʱ��)|(Ԫ��)|(([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)�����)|(����)|([����]��)|((\\d+)���(\\d+)��)|(ÿ��)|(([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)�·�)|(����(\\d+)��(\\d+)��)|(����([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)��)|((\\d+)�µ�)|(δ��(\\d+)��)|(��([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)��)|(\\d?����)|(([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)������)|((\\d+)��([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)��)|([������]��)|(��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)(\\d+)��)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(ͬ([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)��)|((\\d+)���賿)|(ҹ��)|(����(��|��|����|�ü�|��|���|��|ǰ|��|��|����)Сʱ)|(����)|(����ʱ��)|(Ŀ(��|��|����|�ü�|��|���|��|ǰ|��|��|����))|(([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)��)|((\\d+)��(\\d+)��(\\d+)��)|(((10)|(11)|(12)|([1-9]))�·�?)|([12][0-9]����)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)��)|(������)|(�Ժ�)|((\\d+)��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(δ��([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)��)|([0-9]+[����������][��ǰ����]*)|(([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)��)|(�ܾ�)|((\\d+)(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(ȥ��(\\d+)��(\\d+)��)|(������)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)��(\\d+)ʱ)|(�Ŵ�)|(����)|(\\d+��?(Сʱ|����))|((\\d+)���)|(����)|(([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)��Сʱ)|([һ�����������߰˾�ʮ]+����)|(����([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(ʱ��)|((\\d+��)+(\\d+��)?(\\d+��)?(\\d+��)?)|((\\d+)��([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)ʱ)|((\\d+)����)|(([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)��)|(([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)��)|(ȥ��(\\d+)��)|(��ȥ([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)��)|((\\d+)������)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(ִ���ڼ�)|([��ǰ����������ﶬ]+��)|(ȥ��(\\d+)�·�)|(��(��|��|����|�ü�|��|���|��|ǰ|��|��|����))|((\\d+)��)|(������)|(([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)���)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(����)|(��������)|([ӡ��|����|����]?����ʱ��)|(����)|(����(\\d+)��)|(��([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)��)|((\\d+)��(\\d+)��)|([������]��)|((\\d+)��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��(\\d+)ʱ)|(��ʱ)|(��սʱ��)|(([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)��)|(�������)|(ȥ��)|(�������)|(����)|(����([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)��Щʱ��)|((\\d+)([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)��)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)������)|((\\d+)��Сʱ)|(([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)����)|(����)|(����)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)����)|((\\d+)��(��|��|����|�ü�|��|���|��|ǰ|��|��|����))|(Ŀǰ)|(ȥ��([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)��)|((\\d+)ʱ(\\d+)��)|(ÿ��)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)��ʱ��)|((\\d+)����)|(��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)(\\d+)��(��|��|����|�ü�|��|���|��|ǰ|��|��|����))|(��Ѯ)|((\\d+)�·�)|(����)|(��(��|��|����|�ü�|��|���|��|ǰ|��|��|����))|((\\d+)��)|(�µ�)|(�����)|((\\d+)��(\\d+)����)|(\\d+����)|(��([��һ�����������߰˾�ʮ��ǧ��]+|\\d+)��(��|��|����|�ü�|��|���|��|ǰ|��|��|����))|(����)|(����)|(ĩ��)|(������ҹ)|(����(\\d+)��)|((\\d+)��(\\d+)��)|((\\d+)��ҹ)|((��Щ|ĳ��|���|��������Щ|ǰЩ)+ʱ��)|(ͬ��)|((����|�Ǹ�|������|���ճ�ͻ��)ʱ��)|(ÿ����)|(һ��)|((\\d+)��?[����])|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)����)|([��ţ������������Ｆ����]��)|(����)|(��Щʱ��)|(����)|(ÿ��)|(���)|(��(��)?��)|(���)|((\\d+)��(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|((��|��|����|�ü�|��|���|��|ǰ|��|��|����)������)|(����(��|��|����|�ü�|��|���|��|ǰ|��|��|����)��)|(ͬ[һ�����������߰˾�ʮ][��|��|��])|(T\\d+:\\d+:\\d+)|(\\d+/\\d+/\\d+:\\d+:\\d+.\\d+)|(\\?\\?\\?\\?-\\?\\?-\\?\\?T\\d+:\\d+:\\d+)|(\\d+-\\d+-\\d+T\\d+:\\d+:\\d+)|(\\d+/\\d+/\\d+ \\d+:\\d+:\\d+.\\d+)|(\\d+-\\d+-\\d+|[0-9]{8})|(((\\d+)��)?((10)|(11)|(12)|([1-9]))��(\\d+))|((\\d[\\.\\-])?((10)|(11)|(12)|([1-9]))[\\.\\-](\\d+))");
//		writeModel(p, classPath+"/TimeExp1.zip");
        /**������������*/
//		Pattern p = Pattern.compile("(��|\\.|\\-)");
//		Matcher m = p.matcher("17��2��1 ����Է�");
//		if(m.find()){
//			LOGGER.debug(m.group());
//		}
    }

}
